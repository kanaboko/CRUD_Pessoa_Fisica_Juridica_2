@model CRUD_Pessoa_Fisica_Juridica_2.ViewModel.ClienteViewModel

@{
    ViewBag.Title = "EditPessoaFisica";
}

<div id="myModal" class="modal fade in">
    <div class="modal-dialog">
        <div class="modal-content">
            <div id="myModalContent"></div>
        </div>
    </div>
</div>

<h2>EditPessoaFisica</h2>


@using (Html.BeginForm("EditPessoaFisica", "Cliente", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()

<div class="form-horizontal">
    <h4>PessoaFisicaViewModel</h4>
    <hr />
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
    @Html.HiddenFor(model => model.PessoaFisica.Id)


    <div class="form-group">
        @Html.LabelFor(model => model.PessoaFisica.Nome, htmlAttributes: new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.EditorFor(model => model.PessoaFisica.Nome, new { htmlAttributes = new { @class = "form-control" } })
            @Html.ValidationMessageFor(model => model.PessoaFisica.Nome, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.PessoaFisica.RG, htmlAttributes: new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.EditorFor(model => model.PessoaFisica.RG, new { htmlAttributes = new { @class = "form-control" } })
            @Html.ValidationMessageFor(model => model.PessoaFisica.RG, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.PessoaFisica.CPF, htmlAttributes: new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.EditorFor(model => model.PessoaFisica.CPF, new { htmlAttributes = new { @class = "form-control" } })
            @Html.ValidationMessageFor(model => model.PessoaFisica.CPF, "", new { @class = "text-danger" })
        </div>
    </div>

    <div>
        @Html.Partial("_DragAndDropImagem")
    </div>


    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" value="Save" class="btn btn-default" />
        </div>
    </div>
</div>
}


<div id="replaceFotos">
    @Html.Partial("_ListarImagem")
</div>

<div id="replace">
    @Html.Partial("_ListarEndereco", Model.PessoaFisica.Endereco)
</div>

<div>
    @Html.ActionLink("Back to List", "Index")
</div>



@section Scripts {
    @*<script type="text/javascript">

            $(function () {
                $.ajaxSetup({ cache: false });

                $('a[data-modal]').on("click", function (e) {
                    $('#myModalContent').load(this.href, function () {
                        $('#myModal').modal("show");
                        bindForm(this);
                    });
                    return false;
                });
            });

            function bindForm(dialog) {
                $('form', dialog).submit(function () {
                    $.ajax({
                        url: this.action,
                        type: this.method,
                        data: $(this).serialize(),
                        success: function (result) {
                            if (result.success) {
                                $('#myModal').modal('hide');
                                $('#replace').load(result.url); // Carrega o resultado HTML para a div demarcada
                            } else {
                                $('#myModalContent').html(result);
                                bindForm(dialog);
                            }
                        }
                    });
                    return false;
                });
            }

        </script>*@
    @Scripts.Render("~/bundles/jqueryval")

}


